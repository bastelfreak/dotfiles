#!/bin/bash

#echo "Bash options, totally custom"

declare -A BASHOPT

BASHOPT["BASHOPT_VERBOSE"]=verb
BASHOPT["BASHOPT_RVM_ENABLE"]=rvm
BASHOPT["BASHOPT_COREPIP_ENABLE"]=corepip
BASHOPT["BASHOPT_PROMPT_DIR"]=promptdir
BASHOPT["BASHOPT_PROMPT_GIT"]=promptgit

export BASHOPT


short_to_long () {
    short=$1
    for OPTION in ${!BASHOPT[*]}; do
        if [ ${BASHOPT[$OPTION]} = ${short} ]; then
            long=${OPTION}
            break
        fi
    done
    echo $long
}

#export -f short_to_long

bashopt () {

    if ! [ -z $1 ]; then
        option=$1
        if ! [ -z $2 ];then
            setting=$2
            if [[ $setting !=  'on' ]] && [[ $setting != 'off' ]]; then
                echo "Must set options to 'on' or 'off'"
                return 1
            fi

            long_option=`short_to_long $option`
            #eval \$$long_option=${setting}
            eval ${long_option}=${setting}
            export $long_option
        else
            long_option=`short_to_long $option`
            echo -n "${option} "
            #eval echo \$$long_option
            echo ${!long_option}

        fi
    else
        for OPTION in ${!BASHOPT[*]}; do
            long=$OPTION
            short=${BASHOPT[$OPTION]}
            echo -en "${short} \t"
            echo ${!long}
        done
    fi

}

#export -f bashopt
